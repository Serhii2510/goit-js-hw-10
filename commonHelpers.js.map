{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst inputDate = document.querySelector('input#datetime-picker');\nconst startCount = document.querySelector('[data-start]');\nstartCount.disabled = true;\nlet userSelectedDate;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      if (Date.now() >= Date.parse(userSelectedDate)) {\n          startCount.disabled = true;\n          iziToast.error({\n              position: 'topRight',\n              backgroundColor: 'red',\n              theme: 'dark',\n              title: 'Error',\n              titleColor: 'white',\n              message: 'Please choose a date in the future',\n              messageColor: 'white',\n          });          \n      } else {\n          startCount.disabled = false;\n      }\n  },\n};\n\nflatpickr(inputDate, options);\n\nlet intervalId = null;\nlet days = document.querySelector('[data-days]');\nlet hours = document.querySelector('[data-hours]');\nlet minutes = document.querySelector('[data-minutes]');\nlet seconds = document.querySelector('[data-seconds]');\n\nstartCount.addEventListener('click', () => {\n    startCount.disabled = true;\n    inputDate.disabled = true;\n    let timeLeftMs = 0;\n    intervalId = setInterval(() => {\n        timeLeftMs = Date.parse(userSelectedDate) - Date.now();\n        function convertMs(ms) {\n            const second = 1000;\n            const minute = second * 60;\n            const hour = minute * 60;\n            const day = hour * 24;\n\n            const days = Math.floor(ms / day);\n            const hours = Math.floor((ms % day) / hour);\n            const minutes = Math.floor(((ms % day) % hour) / minute);\n            const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n            return { days, hours, minutes, seconds };\n        }\n\n        const timeLeft = convertMs(timeLeftMs);\n        function addLeadingZero(value) {\n            return String(value).padStart(2, '0');\n        }\n\n        days.textContent = addLeadingZero(timeLeft.days);\n        hours.textContent = addLeadingZero(timeLeft.hours);\n        minutes.textContent = addLeadingZero(timeLeft.minutes);\n        seconds.textContent = addLeadingZero(timeLeft.seconds);\n\n        if (timeLeftMs <= 1000) {\n            clearInterval(intervalId);\n            inputDate.disabled = false;\n        }\n    }, 1000);\n})\n"],"names":["inputDate","startCount","userSelectedDate","options","selectedDates","iziToast","flatpickr","intervalId","days","hours","minutes","seconds","timeLeftMs","convertMs","ms","timeLeft","addLeadingZero","value"],"mappings":"+IAKA,MAAMA,EAAY,SAAS,cAAc,uBAAuB,EAC1DC,EAAa,SAAS,cAAc,cAAc,EACxDA,EAAW,SAAW,GACtB,IAAIC,EACJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBF,EAAmBE,EAAc,CAAC,EAC9B,KAAK,IAAK,GAAI,KAAK,MAAMF,CAAgB,GACzCD,EAAW,SAAW,GACtBI,EAAS,MAAM,CACX,SAAU,WACV,gBAAiB,MACjB,MAAO,OACP,MAAO,QACP,WAAY,QACZ,QAAS,qCACT,aAAc,OAC5B,CAAW,GAEDJ,EAAW,SAAW,EAE7B,CACH,EAEAK,EAAUN,EAAWG,CAAO,EAE5B,IAAII,EAAa,KACbC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAErDV,EAAW,iBAAiB,QAAS,IAAM,CACvCA,EAAW,SAAW,GACtBD,EAAU,SAAW,GACrB,IAAIY,EAAa,EACjBL,EAAa,YAAY,IAAM,CAC3BK,EAAa,KAAK,MAAMV,CAAgB,EAAI,KAAK,MACjD,SAASW,EAAUC,EAAI,CAMnB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAC1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EACpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EACjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAED,MAAMI,EAAWF,EAAUD,CAAU,EACrC,SAASI,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CAEDT,EAAK,YAAcQ,EAAeD,EAAS,IAAI,EAC/CN,EAAM,YAAcO,EAAeD,EAAS,KAAK,EACjDL,EAAQ,YAAcM,EAAeD,EAAS,OAAO,EACrDJ,EAAQ,YAAcK,EAAeD,EAAS,OAAO,EAEjDH,GAAc,MACd,cAAcL,CAAU,EACxBP,EAAU,SAAW,GAE5B,EAAE,GAAI,CACX,CAAC"}